<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="内容翻译自ECMA-262-3 in detail. Chapter3. This ##定义this是执行上下文的一个属性，在一个执行上下文中，它包含变量对象、作用域链以及this值三个属性。this值和上下文的可执行代码类型密切相关。它在进入上下文时被确定，并且在这段上下文中的代码执行时被确定。 ##全局代码中的this值在全局代码中，this值永远指向全局对象本身123456789101112">
<meta name="keywords" content="JavaScript">
<meta property="og:type" content="article">
<meta property="og:title" content="Smashing JavaScript: this值详解">
<meta property="og:url" content="http://codethink.me/2013/12/28/javascript-this/index.html">
<meta property="og:site_name" content="CodeThink">
<meta property="og:description" content="内容翻译自ECMA-262-3 in detail. Chapter3. This ##定义this是执行上下文的一个属性，在一个执行上下文中，它包含变量对象、作用域链以及this值三个属性。this值和上下文的可执行代码类型密切相关。它在进入上下文时被确定，并且在这段上下文中的代码执行时被确定。 ##全局代码中的this值在全局代码中，this值永远指向全局对象本身123456789101112">
<meta property="og:updated_time" content="2017-05-28T03:01:40.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Smashing JavaScript: this值详解">
<meta name="twitter:description" content="内容翻译自ECMA-262-3 in detail. Chapter3. This ##定义this是执行上下文的一个属性，在一个执行上下文中，它包含变量对象、作用域链以及this值三个属性。this值和上下文的可执行代码类型密切相关。它在进入上下文时被确定，并且在这段上下文中的代码执行时被确定。 ##全局代码中的this值在全局代码中，this值永远指向全局对象本身123456789101112">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Smashing JavaScript: this值详解</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/archieyang">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2014/07/13/use-wraps-decorator-factory/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a class="icon" href="/2013/12/26/execution-context/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://codethink.me/2013/12/28/javascript-this/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://codethink.me/2013/12/28/javascript-this/&text=Smashing JavaScript: this值详解"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://codethink.me/2013/12/28/javascript-this/&title=Smashing JavaScript: this值详解"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://codethink.me/2013/12/28/javascript-this/&is_video=false&description=Smashing JavaScript: this值详解"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Smashing JavaScript: this值详解&body=Check out this article: http://codethink.me/2013/12/28/javascript-this/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://codethink.me/2013/12/28/javascript-this/&title=Smashing JavaScript: this值详解"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://codethink.me/2013/12/28/javascript-this/&title=Smashing JavaScript: this值详解"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://codethink.me/2013/12/28/javascript-this/&title=Smashing JavaScript: this值详解"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://codethink.me/2013/12/28/javascript-this/&title=Smashing JavaScript: this值详解"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://codethink.me/2013/12/28/javascript-this/&name=Smashing JavaScript: this值详解&description=&lt;p&gt;内容翻译自&lt;a href=&quot;http://dmitrysoshnikov.com/ecmascript/chapter-3-this/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ECMA-262-3 in detail. Chapter3. This&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;##定义&lt;br&gt;this是执行上下文的一个属性，在一个执行上下文中，它包含变量对象、作用域链以及this值三个属性。this值和上下文的可执行代码类型密切相关。它在进入上下文时被确定，并且在这段上下文中的代码执行时被确定。&lt;/p&gt;
&lt;p&gt;##全局代码中的this值&lt;br&gt;在全局代码中，this值永远指向全局对象本身&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// explicit property definition of&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// the global object&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.a = &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;// global.a = 10&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;alert(a); &lt;span class=&quot;comment&quot;&gt;// 10&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// implicit definition via assigning&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// to unqualified identifier&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;b = &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;alert(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.b); &lt;span class=&quot;comment&quot;&gt;// 20&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// also implicit via variable declaration&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// because variable object of the global context&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// is the global object itself&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; c = &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;alert(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.c); &lt;span class=&quot;comment&quot;&gt;// 30&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;"><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Smashing JavaScript: this值详解
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">CodeThink</span>
      </span>
      
    <div class="postdate">
        <time datetime="2013-12-28T08:23:56.000Z" itemprop="datePublished">2013-12-28</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/JavaScript/">JavaScript</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>内容翻译自<a href="http://dmitrysoshnikov.com/ecmascript/chapter-3-this/" target="_blank" rel="external">ECMA-262-3 in detail. Chapter3. This</a></p>
<p>##定义<br>this是执行上下文的一个属性，在一个执行上下文中，它包含变量对象、作用域链以及this值三个属性。this值和上下文的可执行代码类型密切相关。它在进入上下文时被确定，并且在这段上下文中的代码执行时被确定。</p>
<p>##全局代码中的this值<br>在全局代码中，this值永远指向全局对象本身<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// explicit property definition of</span></div><div class="line"><span class="comment">// the global object</span></div><div class="line"><span class="keyword">this</span>.a = <span class="number">10</span>; <span class="comment">// global.a = 10</span></div><div class="line">alert(a); <span class="comment">// 10</span></div><div class="line"> </div><div class="line"><span class="comment">// implicit definition via assigning</span></div><div class="line"><span class="comment">// to unqualified identifier</span></div><div class="line">b = <span class="number">20</span>;</div><div class="line">alert(<span class="keyword">this</span>.b); <span class="comment">// 20</span></div><div class="line"> </div><div class="line"><span class="comment">// also implicit via variable declaration</span></div><div class="line"><span class="comment">// because variable object of the global context</span></div><div class="line"><span class="comment">// is the global object itself</span></div><div class="line"><span class="keyword">var</span> c = <span class="number">30</span>;</div><div class="line">alert(<span class="keyword">this</span>.c); <span class="comment">// 30</span></div></pre></td></tr></table></figure><br><a id="more"></a></p>
<p>##函数代码中的this值</p>
<p>在函数代码中，this最主要的特性在于他没有被静态的绑定到函数上。如前文所述，this值在进入上下文时被确定，对于一个函数而言，这个值在每次调用的时候可能完全不同。</p>
<p>但是，在运行时this值是不可变的，即不能为this赋一个新值，因为它并不是一个变量。</p>
<p>有几个因素会影响到运行时的this值：</p>
<p>首先，在一个普通的函数调用中，this值由激活上下文的调用者提供，比如调用该函数的父级上下文。而this的值由调用表达式的形式决定。</p>
<p>记住这点非常重要，this值只受调用表达式的形式，也就是调用函数的方法影响。<br>往下看，我们会发现，即使一个普通的全局函数也可能会通过不同形式的调用表达式被激活，并使它获得一个不同的this值：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  alert(<span class="keyword">this</span>);</div><div class="line">&#125;</div><div class="line"> </div><div class="line">foo(); <span class="comment">// global</span></div><div class="line"> </div><div class="line">alert(foo === foo.prototype.constructor); <span class="comment">// true</span></div><div class="line"> </div><div class="line"><span class="comment">// but with another form of the call expression</span></div><div class="line"><span class="comment">// of the same function, this value is different</span></div><div class="line"> </div><div class="line">foo.prototype.constructor(); <span class="comment">// foo.prototype</span></div></pre></td></tr></table></figure></p>
<p>同样，我们可以像函数一样调用对象的方法，同时使this值并不指向该对象：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> foo = &#123;</div><div class="line">  <span class="attr">bar</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    alert(<span class="keyword">this</span>);</div><div class="line">    alert(<span class="keyword">this</span> === foo);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">foo.bar(); <span class="comment">// foo, true</span></div><div class="line"> </div><div class="line"><span class="keyword">var</span> exampleFunc = foo.bar;</div><div class="line"> </div><div class="line">alert(exampleFunc === foo.bar); <span class="comment">// true</span></div><div class="line"> </div><div class="line"><span class="comment">// again with another form of the call expression</span></div><div class="line"><span class="comment">// of the same function, we have different this value</span></div><div class="line"> </div><div class="line">exampleFunc(); <span class="comment">// global, false</span></div></pre></td></tr></table></figure></p>
<p>调用表达式究竟是怎么影响this值的？为了完全理解如何确定this的值，我们有必要学习下内部类型Reference的实现细节。</p>
<p>###Reference</p>
<p>下面采用伪代码来表示Reference类型的值的细节，Reference被表示成一个对象，该对象具有两个属性：一个base属性和一个propertyName属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> valueOfReferenceType = &#123;</div><div class="line">  <span class="attr">base</span>: &lt;base object&gt;,</div><div class="line">  propertyName: &lt;property name&gt;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>我们只有在两种情况下会对Reference类型求值：</p>
<ol>
<li>当处理标识符时</li>
<li>当处理属性访问时</li>
</ol>
<p>标识符在标识符解析过程中被处理，我们需要了解的是，在这个过程中返回的一定是一个Reference类型。</p>
<p>标识符包括变量名，函数名，函数参数名和全局对象的未受限属性。</p>
<p>考虑下面这个例子中的标识符：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> foo = <span class="number">10</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;&#125;</div></pre></td></tr></table></figure><br>在操作中，对应的Reference类型入如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> fooReference = &#123;</div><div class="line">  <span class="attr">base</span>: global,</div><div class="line">  <span class="attr">propertyName</span>: <span class="string">'foo'</span></div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="keyword">var</span> barReference = &#123;</div><div class="line">  <span class="attr">base</span>: global,</div><div class="line">  <span class="attr">propertyName</span>: <span class="string">'bar'</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>为了从Reference类型中获得真正的对象值，需要使用一个类似于下面伪代码表示的GetValue函数：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetValue</span>(<span class="params">value</span>) </span>&#123;</div><div class="line"> </div><div class="line">  <span class="keyword">if</span> (Type(value) != Reference) &#123;</div><div class="line">    <span class="keyword">return</span> value;</div><div class="line">  &#125;</div><div class="line"> </div><div class="line">  <span class="keyword">var</span> base = GetBase(value);</div><div class="line"> </div><div class="line">  <span class="keyword">if</span> (base === <span class="literal">null</span>) &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">ReferenceError</span>;</div><div class="line">  &#125;</div><div class="line"> </div><div class="line">  <span class="keyword">return</span> base.[[Get]](GetPropertyName(value));</div><div class="line"> </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这里内部函数[[Get]]返回对象属性的真正的值，包括对原型链中继承的属性的分析。</p>
<p>属性访问也是一样，有两种类型的属性访问：点表示和括号表示：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">foo.bar();</div><div class="line">foo[<span class="string">'bar'</span>]();</div></pre></td></tr></table></figure></p>
<p>在计算中间值的过程中，我们仍然使用Reference类型：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> fooBarReference = &#123;</div><div class="line">  <span class="attr">base</span>: foo,</div><div class="line">  <span class="attr">propertyName</span>: <span class="string">'bar'</span></div><div class="line">&#125;;</div><div class="line"> </div><div class="line">GetValue(fooBarReference); <span class="comment">// function object "bar"</span></div></pre></td></tr></table></figure>
<p>下面将列出的是本文的重中之重，确定一个函数上下文中this值的规则是：</p>
<blockquote>
<p>函数上下文中的this值由调用提供，并且有当前的调用表达式（语法上函数调用的写法）确定。</p>
<p>如果在调用括号()的左边是一个Reference类型的话，this的值被设计值这个Reference类型的base对象。</p>
<p>在所有其他的情况下（比如其他任何不是Reference类型的值类型），this值总是被设置为null。但是由于对于this而言，null值是没有意义的，它被隐式的转化为了全局对象。</p>
</blockquote>
<p>让我们来看一个例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">foo(); <span class="comment">// global</span></div></pre></td></tr></table></figure>
<p>在调用括号的左侧是一个Reference类型的值（因为foo是一个标识符）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> fooReference = &#123;</div><div class="line">  <span class="attr">base</span>: global,</div><div class="line">  <span class="attr">propertyName</span>: <span class="string">'foo'</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>根据前面的规则，this值被设置为了Reference类型的base对象，也就是全局对象。</p>
<p>同样的，对于一个属性访问而言：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> foo = &#123;</div><div class="line">  <span class="attr">bar</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">foo.bar(); <span class="comment">// foo</span></div></pre></td></tr></table></figure>
<p>这里我们得到了一个Reference类型，它的base对象，也就是foo对象在激活bar函数时被用作this的值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> fooBarReference = &#123;</div><div class="line">  <span class="attr">base</span>: foo,</div><div class="line">  <span class="attr">propertyName</span>: <span class="string">'bar'</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>但是，通过另一个调用表达式激活这个函数，我们会得到另一个this值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> test = foo.bar;</div><div class="line">test(); <span class="comment">// global</span></div></pre></td></tr></table></figure>
<p>因为这里的标识符test，产生了另一个Reference的值，而它的base对象-全局对象，被用作了this的值。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> testReference = &#123;</div><div class="line">  <span class="attr">base</span>: global,</div><div class="line">  <span class="attr">propertyName</span>: <span class="string">'test'</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>注意，在ES5中的strict mode中，this值不再指向全局变量，而是被设置为undefined。</p>
<p>现在我们可以准确的分析处，为什么通过一个函数在被不同形式的调用表达式激活时，会具有不同的this值-因为它们有不同的Reference中间值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  alert(<span class="keyword">this</span>);</div><div class="line">&#125;</div><div class="line"> </div><div class="line">foo(); <span class="comment">// global, because</span></div><div class="line"> </div><div class="line"><span class="keyword">var</span> fooReference = &#123;</div><div class="line">  <span class="attr">base</span>: global,</div><div class="line">  <span class="attr">propertyName</span>: <span class="string">'foo'</span></div><div class="line">&#125;;</div><div class="line"> </div><div class="line">alert(foo === foo.prototype.constructor); <span class="comment">// true</span></div><div class="line"> </div><div class="line"><span class="comment">// another form of the call expression</span></div><div class="line"> </div><div class="line">foo.prototype.constructor(); <span class="comment">// foo.prototype, because</span></div><div class="line"> </div><div class="line"><span class="keyword">var</span> fooPrototypeConstructorReference = &#123;</div><div class="line">  <span class="attr">base</span>: foo.prototype,</div><div class="line">  <span class="attr">propertyName</span>: <span class="string">'constructor'</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>另一个由于调用表达式导致的动态this值的典型例子如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  alert(<span class="keyword">this</span>.bar);</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">var</span> x = &#123;<span class="attr">bar</span>: <span class="number">10</span>&#125;;</div><div class="line"><span class="keyword">var</span> y = &#123;<span class="attr">bar</span>: <span class="number">20</span>&#125;;</div><div class="line"> </div><div class="line">x.test = foo;</div><div class="line">y.test = foo;</div><div class="line"> </div><div class="line">x.test(); <span class="comment">// 10</span></div><div class="line">y.test(); <span class="comment">// 20</span></div></pre></td></tr></table></figure>
<p>###函数调用和非Reference类型<br>所以，像我们注意到的，如果在调用括号的左侧的值算是其他类型，而不是Reference时，this的值就被甚至为了null，进而指向全局变量。</p>
<p>让我们考虑下面的表达式：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  alert(<span class="keyword">this</span>); <span class="comment">// null =&gt; global</span></div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<p>在这种情况下，我们有一个函数对象，而不是一个Reference类型的对象，因此this的值指向了全局对象。</p>
<p>更复杂一些的例子如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> foo = &#123;</div><div class="line">  <span class="attr">bar</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    alert(<span class="keyword">this</span>);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">foo.bar(); <span class="comment">// Reference, OK =&gt; foo</span></div><div class="line">(foo.bar)(); <span class="comment">// Reference, OK =&gt; foo</span></div><div class="line"> </div><div class="line">(foo.bar = foo.bar)(); <span class="comment">// global?</span></div><div class="line">(<span class="literal">false</span> || foo.bar)(); <span class="comment">// global?</span></div><div class="line">(foo.bar, foo.bar)(); <span class="comment">// global?</span></div></pre></td></tr></table></figure></p>
<p>既然都是中间值为Reference类型的属性访问，为什么我们在有些情况中得到了base对象，而在有些情况中得到了全局对象？</p>
<p>这是因为后三种调用，在使用了一些操作符后，在调用括号的左侧已经不是Reference类型了。<br>第一个例子很清楚，对于一个Reference类型，this被设为了它的base对象， foo。</p>
<p>第二个例子中，grouping操作符没有出发获取实际值的GetValue方法，因此grouping操作返回的仍然hi一个引用类型的值，因此this被设为了base对象。</p>
<p>滴撒个例子中，赋值操作符，和grouping操作符不同，调用了GetValue方法求值，因此返回的是一个函数对象，而不是Reference类型的对象，因此this值被设为null，并最终指向全局对象。</p>
<p>类似的还有第四个和第五个例子-逗号运算符和逻辑或表达式调用了GetValue方法，因此我们失去了Reference类型的对象，得到了函数类型的对象，因此this被设置为了全局对象。</p>
<p>###Reference类型和值为null的this</p>
<p>有一种特殊情况在调用括号的左侧是一个Reference类型，但是this的值却被设置为null，进而变为全局变量。这种情况下，Reference值的base对象是一个活动对象。</p>
<p>我们把下面这个内部函数被父函数调用的情况当做例子。我们知道，局部变量，内部函数和形式参数都存储在给定函数的活动对象中：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    alert(<span class="keyword">this</span>); <span class="comment">// global</span></div><div class="line">  &#125;</div><div class="line">  bar(); <span class="comment">// the same as AO.bar()</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这个活动对象返回的this值总是为null，进而被设置为全局对象。</p>
<p>这种特殊情况还出现在一个with语句的内部一个调用函数，而这个函数又恰好是with对象包含的函数时。with语句将with对象放到作用域链的最前端，也就是活动对象之前。因此，对于Reference类型的值而言，base对象并不是活动对象，而是一个with语句的对象。在这种情况下，它不仅和内部有关，而且和全局函数有关，因为with对象掩盖了作用域链中更高层级的对象。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="number">10</span>;</div><div class="line"> </div><div class="line"><span class="keyword">with</span> (&#123;</div><div class="line"> </div><div class="line">  <span class="attr">foo</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    alert(<span class="keyword">this</span>.x);</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">x</span>: <span class="number">20</span></div><div class="line"> </div><div class="line">&#125;) &#123;</div><div class="line"> </div><div class="line">  foo(); <span class="comment">// 20</span></div><div class="line"> </div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="comment">// because</span></div><div class="line"> </div><div class="line"><span class="keyword">var</span>  fooReference = &#123;</div><div class="line">  <span class="attr">base</span>: __withObject,</div><div class="line">  <span class="attr">propertyName</span>: <span class="string">'foo'</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>同样的情况还出现在调用一个作为catch从句的实参的函数时：在这种情况下，catch对象也被添加到了作用域链的顶端，也就是活动对象，或者全局对象之前。但是，这种行为被认为是ECMA-262-3的一个bug，并在ECMA-262-5中被修正，即，给定的活动中的this值被设置为全局对象，而不是catch对象：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">  <span class="keyword">throw</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    alert(<span class="keyword">this</span>);</div><div class="line">  &#125;;</div><div class="line">&#125; <span class="keyword">catch</span> (e) &#123;</div><div class="line">  e(); <span class="comment">// __catchObject - in ES3, global - fixed in ES5</span></div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="comment">// on idea</span></div><div class="line"> </div><div class="line"><span class="keyword">var</span> eReference = &#123;</div><div class="line">  <span class="attr">base</span>: __catchObject,</div><div class="line">  <span class="attr">propertyName</span>: <span class="string">'e'</span></div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// but, as this is a bug</span></div><div class="line"><span class="comment">// then this value is forced to global</span></div><div class="line"><span class="comment">// null =&gt; global</span></div><div class="line"> </div><div class="line"><span class="keyword">var</span> eReference = &#123;</div><div class="line">  <span class="attr">base</span>: global,</div><div class="line">  <span class="attr">propertyName</span>: <span class="string">'e'</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>同样的情况还出现在函数的递归调用中。在第一次调用函数时，base对象是父活动对象（或者全局对象），在递归调用中，base对象应该是存储函数表达式名字的对象。但是，在这种情况下，this值始终为全局对象：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">bar</span>) </span>&#123;</div><div class="line"> </div><div class="line">  alert(<span class="keyword">this</span>);</div><div class="line"> </div><div class="line">  !bar &amp;&amp; foo(<span class="number">1</span>); <span class="comment">// "should" be special object, but always (correct) global</span></div><div class="line"> </div><div class="line">&#125;)(); <span class="comment">// global</span></div></pre></td></tr></table></figure>
<p>###构造函数中的this</p>
<p>还有一种在函数上下文中被调用的this值的情况-调用作为构造函数的函数：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  alert(<span class="keyword">this</span>); <span class="comment">// newly created object, below - "a" object</span></div><div class="line">  <span class="keyword">this</span>.x = <span class="number">10</span>;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> A();</div><div class="line">alert(a.x); <span class="comment">// 10</span></div></pre></td></tr></table></figure></p>
<p>在这种情况下，new操作符调用A函数的内部方法[[Contruct]]，并在创建对象后，调用同一个A函数内部的[[Call]]方法，并将this的值设置为新创建的对象的值。</p>
<p>###指定函数调用this值</p>
<p>在Function.prototype中，有两个方法允许设定函数调用的this值，他们是apply和call方法。</p>
<p>这两个方法都将第一个参数做为被调用上下文中使用的this值。两个方法的不同点是：apply方法的第二个参数应是一个数组，或者类似数组行为的对象，而calll可以接受任何参数。对于两个方法而言，第一个参数是必须的：也就是this的值。<br>例如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> b = <span class="number">10</span>;</div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">c</span>) </span>&#123;</div><div class="line">  alert(<span class="keyword">this</span>.b);</div><div class="line">  alert(c);</div><div class="line">&#125;</div><div class="line"> </div><div class="line">a(<span class="number">20</span>); <span class="comment">// this === global, this.b == 10, c == 20</span></div><div class="line"> </div><div class="line">a.call(&#123;<span class="attr">b</span>: <span class="number">20</span>&#125;, <span class="number">30</span>); <span class="comment">// this === &#123;b: 20&#125;, this.b == 20, c == 30</span></div><div class="line">a.apply(&#123;<span class="attr">b</span>: <span class="number">30</span>&#125;, [<span class="number">40</span>]) <span class="comment">// this === &#123;b: 30&#125;, this.b == 30, c == 40</span></div><div class="line"></div></pre></td></tr></table></figure></p>
<p>##总结<br>本文我们讨论了ECMAScript中的this关键字的特性，跟其他语言相比，这真的算是特性了。</p>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/archieyang">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://codethink.me/2013/12/28/javascript-this/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://codethink.me/2013/12/28/javascript-this/&text=Smashing JavaScript: this值详解"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://codethink.me/2013/12/28/javascript-this/&title=Smashing JavaScript: this值详解"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://codethink.me/2013/12/28/javascript-this/&is_video=false&description=Smashing JavaScript: this值详解"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Smashing JavaScript: this值详解&body=Check out this article: http://codethink.me/2013/12/28/javascript-this/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://codethink.me/2013/12/28/javascript-this/&title=Smashing JavaScript: this值详解"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://codethink.me/2013/12/28/javascript-this/&title=Smashing JavaScript: this值详解"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://codethink.me/2013/12/28/javascript-this/&title=Smashing JavaScript: this值详解"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://codethink.me/2013/12/28/javascript-this/&title=Smashing JavaScript: this值详解"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://codethink.me/2013/12/28/javascript-this/&name=Smashing JavaScript: this值详解&description=&lt;p&gt;内容翻译自&lt;a href=&quot;http://dmitrysoshnikov.com/ecmascript/chapter-3-this/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ECMA-262-3 in detail. Chapter3. This&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;##定义&lt;br&gt;this是执行上下文的一个属性，在一个执行上下文中，它包含变量对象、作用域链以及this值三个属性。this值和上下文的可执行代码类型密切相关。它在进入上下文时被确定，并且在这段上下文中的代码执行时被确定。&lt;/p&gt;
&lt;p&gt;##全局代码中的this值&lt;br&gt;在全局代码中，this值永远指向全局对象本身&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// explicit property definition of&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// the global object&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.a = &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;// global.a = 10&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;alert(a); &lt;span class=&quot;comment&quot;&gt;// 10&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// implicit definition via assigning&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// to unqualified identifier&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;b = &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;alert(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.b); &lt;span class=&quot;comment&quot;&gt;// 20&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// also implicit via variable declaration&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// because variable object of the global context&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// is the global object itself&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; c = &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;alert(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.c); &lt;span class=&quot;comment&quot;&gt;// 30&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;"><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2017 Archie Yang
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/archieyang">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">


<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-86660611-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->


